image: golang:latest

variables:
  PROGRAM_ARGS: "2 600 200 200 3"

stages:
  - lint
  - test

format:
  stage: lint
  script:
    - go fmt $(go list ./... | grep -v /vendor/)

.test:
  stage: test
  before_script:
    - mkdir -p bin
    - go build -o bin ./...

test-normal:
  extends: .test
  script:
    - ./bin/philo-go $PROGRAM_ARGS

test-empty_arg:
  extends: .test
  script:
    - ./bin/philo-go
  when: manual

test-words_arg:
  extends: .test
  script:
    - ./bin/philo-go aasd 123 12 12 -3
  when: manual
